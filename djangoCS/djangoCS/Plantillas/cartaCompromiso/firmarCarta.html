{% load static %}

{% block titulo %}
<title>Firmar Carta</title>
{% endblock %}

{% block estilos %}
<!-- Favicon-->
<link rel="icon" href={% static 'images/icons/ra.ico' %} type="image/x-icon">

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css?family=Roboto:400,700&subset=latin,cyrillic-ext" rel="stylesheet"
    type="text/css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type="text/css">

<!-- Bootstrap Core Css -->
<link href={% static 'panel/plugins/bootstrap/css/bootstrap.css' %} rel="stylesheet">

<!-- Waves Effect Css -->
<link href={% static 'panel/plugins/node-waves/waves.css' %} rel="stylesheet" />

<!-- Animation Css -->
<link href={% static 'panel/plugins/animate-css/animate.css' %} rel="stylesheet" />

<!-- Morris Chart Css-->
<link href={% static 'panel/plugins/morrisjs/morris.css' %} rel="stylesheet" />

<!-- Bootstrap Select Css -->
<link href={% static 'panel/plugins/bootstrap-select/css/bootstrap-select.css' %} rel="stylesheet" />

<!-- Custom Css -->
<link href={% static 'panel/css/style.css' %} rel="stylesheet">

<!-- AdminBSB Themes. You can choose a theme from css/themes instead of get all themes -->
<link href={% static 'panel/css/themes/all-themes.css' %} rel="stylesheet" />

<link href={% static 'css/firma.css' %} rel="stylesheet" />

{% endblock %}

{% block contenido %}
<div class="row clearfix">
    <div>
        <div class="card">
            <div class="header">
                <h2>
                    Nueva Carta
                </h2>

                <ul class="header-dropdown m-r--5">
                    <li class="dropdown">
                        <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button"
                            aria-haspopup="true" aria-expanded="false">
                            <i class="material-icons">more_vert</i>
                        </a>
                        <ul class="dropdown-menu pull-right">
                            <li><a href="javascript:void(0);">Action</a></li>
                            <li><a href="javascript:void(0);">Another action</a></li>
                            <li><a href="javascript:void(0);">Something else here</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="body">
                <center>
                    <h1>CARTA COMPROMISO REFERENTE AL USO DEL EQUIPO DE COMPUTO.</h1>
                    <h3>FTO-SIS-04 CARTA RESPONSIVA EQUIPO DE COMPUTO</h3>
                    <img src={% static 'images/custom-png.png' %} width="300" alt="User" />
                </center>
                <h3>El empleado se compromete a:</h3>
                <p class="m-t-10 m-b-30">
                    1. Utilizar el equipo de cómputo solo para desarrollar programas, proyectos o tareas de interés de
                    la EMPRESA Custom&Co S.A de S.v.
                </p>
                <p class="m-t-10 m-b-30">
                    2. Utilizar solo el software autorizado por la EMPRESA así como no instalar software no autorizado
                    por el departamento de sistemas.
                </p>
                <p class="m-t-10 m-b-30">
                    3. Respetar la seguridad de los equipos y no intentar violar el acceso de cualquier equipo de
                    cómputo, programa, o página web a los cuales no tenga
                    autorización.
                </p>
                <p class="m-t-10 m-b-30">
                    4. Utilizar los servicios de internet en forma responsable y no consultar o intentar consultar
                    sitios que contengan material inadecuado, material que consuma
                    los recursos de internet como páginas de videos, redes sociales, podcast, música en línea, etcétera.
                    El uso de la red será monitoriada constantemente.
                </p>
                <p class="m-t-10 m-b-30">
                    5. Dar buen uso al material e instalaciones, para no inferir con la operación normal de los equipos
                    de cómputo y de comunicación de la empresa.
                </p>
                <p class="m-t-10 m-b-30">
                    6. No mover o extraer partes del equipo de cómputo.
                </p>
                <p class="m-t-10 m-b-30">
                    7. En ningún equipo de cómputo deben estar instalados programas de juegos, pasatiempos y/o programas
                    innecesarios para el ámbito laboral, así como archivos
                    personales del empleado, el equipo es responsabilidad del empleado pero se considera activo de la
                    EMPRESA por lo que respetando este principio no se
                    debe abusar de la confianza depositada en el EMPLEADO para usar esta herramienta de trabajo.
                </p>
                <p class="m-t-10 m-b-30">
                    8. Es responsabilidad del usuario tomar las precauciones necesarias para el buen funcionamiento del
                    equipo de cómputo que le fue asignado.
                </p>
                <p class="m-t-10 m-b-30">
                    9. La capacidad del almacenamiento del equipo de cómputo será única y exclusivamente para
                    información, material, y archivos referentes a la empresa.
                    No está permitido almacenar archivos que no estén relacionados a su trabajo, como los archivos
                    personales de música, video, imágenes, juegos, entre otros.
                </p>
                <p class="m-t-10 m-b-30">
                    10. No deberá pegarle etiquetas o estampas decorativas al equipo o periféricos.
                </p>
                <p class="m-t-10 m-b-30">
                    11. No está autorizado el uso de los recursos (equipo de cómputo, periféricos y software) con fines
                    lucrativos, actividad comercial o cualquier actividad
                    que no correspondan al giro de la empresa.
                </p>
                <p class="m-t-10 m-b-30">
                    12. Queda expresamente prohibido el uso de aplicaciones de intercambio de archivos punto a punto
                    (como por ejemplo Ares, eMule, Torrents, Limewire) y servidores
                    de descarga (como MEGA, FILEFACTORY, entre otros).
                </p>
                <p class="m-t-10 m-b-30">
                    13. Apagar correctamente el equipo de cómputo al final de la jornada laboral.
                </p>
                <p class="m-t-10 m-b-30">
                    14. El EMPLEADO deberá utilizar de manera correcta el correo electrónico, no podrá cambiar la firma
                    proporcionada por la EMPRESA ni el fondo
                    de escritorio de su equipo.
                </p>
                <p class="m-t-10 m-b-30">
                    15. En caso de requerir software adicional se debe de solicitar al departamento de sistemas vía
                    correo electrónico y este deberá proporcionarcelo a la brevedad
                    o realizar la gestión necesaria para adquirir la licencia de software, en todo caso el departamento
                    de sistemas deberá informarle el estado de su solicitud.
                </p>
                <p class="m-t-10 m-b-30">
                    16. El personal de sistemas es el único autorizado para remover o instalar componentes.
                </p>
                <p class="m-t-10 m-b-30">
                    17. El departamento de sistemas es el único autorizado para:
                </p>
                <p class="m-t-10 m-b-30">
                    - Asignar equipo de cómputo.
                </p>
                <p class="m-t-10 m-b-30">
                    - Realizar actualizaciones de Hardware en caso de que lo requiera.
                </p>
                <p class="m-t-10 m-b-30">
                    - Actualización y mantenimiento correctivo del equipo.
                </p>
                <p class="m-t-10 m-b-30">
                    - Actualización de paquetería de oficina, antivirus y sistemas de la empresa.
                </p>
                <p class="m-t-10 m-b-30">
                    - Respaldo de información (documentos y correos).
                </p>
                <h4 style="text-align: justify;">
                    El equipo de cómputo que se me ha asignado puede ser solicitado por el departamento de sistemas sin
                    previo aviso para llevar a cabo una auditoría.
                    En caso de comprobarse mal uso del equipo de cómputo, se notificarán las irregularidades a los
                    departamentos correspondientes para emitir una sanción
                    adecuada. Las sanciones aplicables a considerar por el departamento de sistemas y la gerencia
                    administrativa son, levantamiento de un acta administrativa
                    o el retiro definitivo del equipo.
                </h4>




                <p class="m-t-10 m-b-30">
                    Por medio de la presente hago constar que he recibido del departamento de sistemas de la empresa
                    Custom&Co S.A de C.V. equipo de cómputo que consta de:
                </p>
                <h2>{{compuSeleccionada}}</h2>

                <div class="row clearfix">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="card">
                            <div class="header">
                                <h2>
                                    CARACTERÍSTICAS DE EQUIPO
                                </h2>
                                <ul class="header-dropdown m-r--5">
                                    <li class="dropdown">
                                        <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown"
                                            role="button" aria-haspopup="true" aria-expanded="false">
                                            <i class="material-icons">more_vert</i>
                                        </a>
                                        <ul class="dropdown-menu pull-right">
                                            <li><a href="javascript:void(0);">Action</a></li>
                                            <li><a href="javascript:void(0);">Another action</a></li>
                                            <li><a href="javascript:void(0);">Something else here</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                            <div class="body">
                                <div class="table-responsive">
                                    <table
                                        class="table table-bordered table-striped table-hover dataTable js-exportable">
                                        <thead>
                                            <tr style="background-color: #fad60e; color:black">
                                                <th>ID Equipo</th>
                                                <th>Tipo</th>
                                                <th>Marca</th>
                                                <th>Modelo</th>
                                                <th>Color</th>
                                                <th>Imagen</th>
                                                <th>Memoria RAM</th>
                                                <th>Procesador</th>
                                                <th>Sistema Operativo</th>
                                                <th>Estado</th>
                                                <th>Activo</th>



                                            </tr>
                                        </thead>
                                        <tfoot>
                                            <tr>
                                                <th>ID Equipo</th>
                                                <th>Tipo</th>
                                                <th>Marca</th>
                                                <th>Modelo</th>
                                                <th>Color</th>
                                                <th>Imagen</th>
                                                <th>Memoria RAM</th>
                                                <th>Procesador</th>
                                                <th>Sistema Operativo</th>
                                                <th>Estado</th>
                                                <th>Activo</th>
                                            </tr>
                                        </tfoot>
                                        <tbody>
                                            <tr>
                                                {% for dato in datosEquipo %}
                                                <th>{{dato.id_equipo}}</th>
                                                <th>{{dato.tipo}}</th>
                                                <th>{{dato.marca}}</th>
                                                <th>{{dato.modelo}}</th>
                                                <th>{{dato.color}}</th>
                                                <th>
                                                    <center>
                                                        <img src="{{dato.imagen.url}}" width="60%" alt="lap">
                                                    </center>
                                                </th>
                                                <th>{{dato.memoriaram}}</th>
                                                <th>{{dato.procesador}}</th>
                                                <th>{{dato.sistemaoperativo}}</th>
                                                <th>{{dato.estado}}</th>
                                                <th>{{dato.activo}}</th>
                                                {% endfor %}
                                            </tr>




                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="m-t-10 m-b-30">
                    El cual me es confiado para uso exclusivo del desempeño de mis actividades laborales asignadas. Se
                    me entregó una copia de la política y estoy consciente de que "Toda la información
                    que los equipos puedan contener, almacenar o procesar es considerada confidencial, por lo que me
                    comprometo a mantener activo el bloqueo del eqeuipo mediante contraseña para evitar
                    el acceso no autorizado".
                </p>
                <p class="m-t-10 m-b-30">
                    Así mismo en cso de tener el equipo un daño o perjuicio por mal uso u operación, este será bajo mi
                    responsabilidad y costo según lo establecido en la "POLÍTICA DE ASIGNACIÓN Y USO DE EQUIPO DE
                    CÓMPUTO"
                    vigente, la cual se me entrega una copia junto con esta responsiva.
                </p>
                <div class="row clearfix">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="card">
                            <div class="header">
                                <h2>
                                    DATOS DE EMPLEADO
                                </h2>
                                <ul class="header-dropdown m-r--5">
                                    <li class="dropdown">
                                        <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown"
                                            role="button" aria-haspopup="true" aria-expanded="false">
                                            <i class="material-icons">more_vert</i>
                                        </a>
                                        <ul class="dropdown-menu pull-right">
                                            <li><a href="javascript:void(0);">Action</a></li>
                                            <li><a href="javascript:void(0);">Another action</a></li>
                                            <li><a href="javascript:void(0);">Something else here</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                            <div class="body">
                                <div class="table-responsive">
                                    <table
                                        class="table table-bordered table-striped table-hover dataTable js-exportable">
                                        <thead>
                                            <tr  style="background-color: #5af1e5; color:black">
                                                <th>ID Empleado</th>
                                                <th>Nombre</th>
                                                <th>Apellidos</th>
                                                <th>Área</th>
                                                <th>Puesto</th>
                                                <th>Correo</th>

                                                <th>Activo</th>

                                            </tr>
                                        </thead>
                                        <tfoot>
                                            <tr>
                                                <th>ID Empleado</th>
                                                <th>Nombre</th>
                                                <th>Apellidos</th>
                                                <th>Área</th>
                                                <th>Puesto</th>
                                                <th>Correo</th>

                                                <th>Activo</th>

                                            </tr>
                                        </tfoot>
                                        <tbody>
                                            <tr>
                                                {% for dato in datosEmpleado %}
                                                <td>{{dato.id_empleado}}</td>
                                                <td>{{dato.nombre}}</td>
                                                <td>{{dato.apellidos}}</td>
                                                <td><span class="{{color}}">{{nombre}}</span></td>
                                                <td>{{dato.puesto}}</td>
                                                <td>{{dato.correo}}</td>
                                                <td>{{dato.activo}}</td>
                                                {% endfor %}

                                            </tr>



                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <center>
                    {% if imagen2 %}
                    <h2>Fecha: {{fecha}}</h2>
                    <img src="{% static 'images/qr4.png' %}" width="10%" alt="qr">
                    <img src="{{imagen.url}}" alt="firma">
                    <h3>Administrador de Custom System - Versión 1.0.0.</h3>
                    {% endif %}





                </center>
                


            </div>
        </div>
        {% if faltaFirma %}
        <!-- aqui va lo del canvas -->
        
        <div style="background-color: #fff; background-clip: border-box;
        border: 1px solid rgba(0, 0, 0, 0.125);
        border-radius: 0.25rem;">
            <div class="row clearfix" > 
                <center>
                    <H2>Escanear QR para firmar en teléfono.</H2>
                    <img src="{% static 'images/qr4.png' %}" width="10%" alt="qr">
                    <h2>Fecha: {{fecha}}</h2>
                    <h2>Ingresar Firma Electrónica</h2>
                    <h4>Se solicita ingresar la firma electrónica del empleado para el archivo virtual.</h4>
                </center>
            </div>
            <br>
            <center>

                <canvas id="sheet" width="400" height="250" style="border: 1px solid black"></canvas>
                <div class="row clearfix">
                    <button type="button"  onclick="limpiar()"
                    class="btn btn-success m-t-15 waves-effect animate__animated animate__flipInX">
                    <i class="material-icons">delete_sweep</i> Limpiar firma</button>
                    
                </div>
                <div clas="row clearfix">  
                    
                    <form action="/guardarImagen/" method="POST">{% csrf_token %}
                        {% for equipo in datosEquipo %}
                        <input type="hidden" name="idEquipo" value="{{equipo.id_equipo}}">
                        {% endfor %}
                        {% for empleado in datosEmpleado %}
                        <input type="hidden" name="idEmpleado" value="{{empleado.id_empleado}}">
                        {% endfor %}
                        <input type="hidden" name="canvasData" id="my_hidden">
                        <button type="submit"  onclick="save()"
                    class="btn btn-warning m-t-15 waves-effect animate__animated animate__flipInX">
                    <i class="material-icons">save</i> Guardar carta</button>
                    </form>
                    <br>
                <div>
                <br>
            </center>
            
        </div>
        {% endif %}
        
    </div>
</div>

<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

{% if imagen2 %}
<script type="text/javascript">
    swal({
        icon: 'success',
        title: 'Wuu..!',
        text: ' Firma Guardada con éxito!',
        footer: '<span style="color: green!important"> Vuelve a navegar por Custom System! </span>',
        width: '40%'
    });
</script>
{% endif %}

<script>
    

    var canvas = document.getElementById('sheet'), g = canvas.getContext("2d");
    g.strokeStyle = "hsl(208, 100%, 43%)";
    g.lineJoin = "round";
    g.lineWidth = 1;
    g.filter = "blur(1px)";

    const
    relPos = pt => [pt.pageX - canvas.offsetLeft, pt.pageY - canvas.offsetTop],
    drawStart = pt => { with(g) { beginPath(); moveTo.apply(g, pt); stroke(); }},
    drawMove = pt => { with(g) { lineTo.apply(g, pt); stroke(); }},

    pointerDown = e => drawStart(relPos(e.touches ? e.touches[0] : e)),
    pointerMove = e => drawMove(relPos(e.touches ? e.touches[0] : e)),

    draw = (method, move, stop) => e => {
        if(method=="add") pointerDown(e);
        canvas[method+"EventListener"](move, pointerMove);
        canvas[method+"EventListener"](stop, g.closePath);
    };

    canvas.addEventListener("touchstart",  function(event) {event.preventDefault()})
    canvas.addEventListener("touchmove",   function(event) {event.preventDefault()})
    canvas.addEventListener("touchend",    function(event) {event.preventDefault()})
    canvas.addEventListener("touchcancel", function(event) {event.preventDefault()})
    canvas.addEventListener("mousedown", draw("add","mousemove","mouseup"));
    canvas.addEventListener("touchstart", draw("add","touchmove","touchend"));
    canvas.addEventListener("mouseup", draw("remove","mousemove","mouseup"));
    canvas.addEventListener("touchend", draw("remove","touchmove","touchend"));

    function limpiar(){
        g.clearRect(0, 0, canvas.width, canvas.height);
    }

    function save() {
        var canvas = document.getElementById('sheet');
        var inputVacio = document.getElementById('my_hidden');
        inputVacio.value = canvas.toDataURL();
        document.forms["form1"].submit();
    }

    

</script>



{% endblock %}

{% block estilosJs %}
<!-- Jquery Core Js -->
<script src={% static 'panel/plugins/jquery/jquery.min.js' %}></script>

<!-- Bootstrap Core Js -->
<script src={% static 'panel/plugins/bootstrap/js/bootstrap.js' %}></script>

<!-- Select Plugin Js -->
<script src={% static 'panel/plugins/bootstrap-select/js/bootstrap-select.js' %}></script>

<!-- Slimscroll Plugin Js -->
<script src={% static 'panel/plugins/jquery-slimscroll/jquery.slimscroll.js' %}></script>

<!-- Bootstrap Colorpicker Js -->
<script src={% static 'panel/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.js' %}></script>

<!-- Dropzone Plugin Js -->
<script src={% static 'panel/plugins/dropzone/dropzone.js' %}></script>

<!-- Input Mask Plugin Js -->
<script src={% static 'panel/plugins/jquery-inputmask/jquery.inputmask.bundle.js' %}></script>

<!-- Multi Select Plugin Js -->
<script src={% static 'panel/plugins/multi-select/js/jquery.multi-select.js' %}></script>

<!-- Jquery Spinner Plugin Js -->
<script src={% static 'panel/plugins/jquery-spinner/js/jquery.spinner.js' %}></script>

<!-- Bootstrap Tags Input Plugin Js -->
<script src={% static 'panel/plugins/bootstrap-tagsinput/bootstrap-tagsinput.js' %}></script>

<!-- noUISlider Plugin Js -->
<script src={% static 'panel/plugins/nouislider/nouislider.js' %}></script>

<!-- Waves Effect Plugin Js -->
<script src={% static 'panel/plugins/node-waves/waves.js' %}></script>

<!-- Jquery DataTable Plugin Js -->
<script src={% static 'panel/plugins/jquery-datatable/jquery.dataTables.js' %}></script>
<script src={% static 'panel/plugins/jquery-datatable/skin/bootstrap/js/dataTables.bootstrap.js' %}></script>
<script src={% static 'panel/plugins/jquery-datatable/extensions/export/dataTables.buttons.min.js' %}></script>
<script src={% static 'panel/plugins/jquery-datatable/extensions/export/buttons.flash.min.js' %}></script>
<script src={% static 'panel/plugins/jquery-datatable/extensions/export/jszip.min.js' %}></script>
<script src={% static 'panel/plugins/jquery-datatable/extensions/export/pdfmake.min.js' %}></script>
<script src={% static 'panel/plugins/jquery-datatable/extensions/export/vfs_fonts.js' %}></script>
<script src={% static 'panel/plugins/jquery-datatable/extensions/export/buttons.html5.min.js' %}></script>
<script src={% static 'panel/plugins/jquery-datatable/extensions/export/buttons.print.min.js' %}></script>

<!-- Jquery CountTo Plugin Js -->
<script src={% static 'panel/plugins/jquery-countto/jquery.countTo.js' %}></script>

<!-- Morris Plugin Js -->
<script src={% static 'panel/plugins/raphael/raphael.min.js' %}></script>
<script src={% static 'panel/plugins/morrisjs/morris.js' %}></script>

<!-- ChartJs -->
<script src={% static 'panel/plugins/chartjs/Chart.bundle.js' %}></script>

<!-- Flot Charts Plugin Js -->
<script src={% static 'panel/plugins/flot-charts/jquery.flot.js' %}></script>
<script src={% static 'panel/plugins/flot-charts/jquery.flot.resize.js' %}></script>
<script src={% static 'panel/plugins/flot-charts/jquery.flot.pie.js' %}></script>
<script src={% static 'panel/plugins/flot-charts/jquery.flot.categories.js' %}></script>
<script src={% static 'panel/plugins/flot-charts/jquery.flot.time.js' %}></script>

<!-- Sparkline Chart Plugin Js -->
<script src={% static 'panel/plugins/jquery-sparkline/jquery.sparkline.js' %}></script>

<!-- Custom Js -->
<script src={% static 'panel/js/admin.js' %}></script>
<script src={% static 'panel/js/pages/index.js' %}></script>
<script src={% static 'panel/js/pages/tables/jquery-datatable.js' %}></script>
<script src={% static 'panel/js/pages/forms/advanced-form-elements.js' %}></script>


<!-- Demo Js -->
<script src={% static 'panel/js/demo.js' %}></script>
{% endblock %}